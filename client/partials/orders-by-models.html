<div ng-controller="OrdersByModelsController as vm">  

    <div class="list-group"
         ng-repeat="model in vm.comparedArr">

        <a class="list-group-item row">
            <h3 class="list-group-item-heading">{{model.ModelName}}</h3>
        </a>
        <a class="list-group-item row" href="#"
           ng-repeat="comparedModel in model.cData"
           ng-hide="model.ModelName == comparedModel.ModelName">
            
            <div class="col-md-2 list-group-item-text">
                <h4 class="list-group-item-heading">
                    {{model.ModelName}}
                </h4>
                <p class="list-group-item-text">
                    {{"Продано: " + model.SoldQtyA}}
                </p>
                <p class="list-group-item-text">
                    {{"Заказов: " + model.OrdQtyA}}
                </p>
            </div>
            <div class="col-md-8 list-group-item-text">

                <div class="progress">
                    <div class="progress-bar progress-bar" style="width: {{vm.countWidth(model, comparedModel, 1)}}">
                        {{model.SoldQtyA - comparedModel.SoldQtyAB}}
                    </div>
                    <div class="progress-bar progress-bar-info progress-bar-striped" style="width: {{vm.countWidth(model, comparedModel, 2)}}">
                        {{comparedModel.SoldQtyAB}}
                    </div>
                    <div class="progress-bar progress-bar-warning progress-bar-striped" style="width: {{vm.countWidth(model, comparedModel, 3)}}">
                        {{comparedModel.SoldQtyBA}}
                    </div>
                    <div class="progress-bar progress-bar-danger" style="width: {{vm.countWidth(model, comparedModel, 4)}}">
                        {{comparedModel.SoldQtyB - comparedModel.SoldQtyBA}}
                    </div>
                </div>

            </div>
            <div class="col-md-2 list-group-item-text">    
                <h4 class="list-group-item-heading">
                    {{comparedModel.ModelName}}
                </h4>
                <p class="list-group-item-text">
                    {{"Продано: " + comparedModel.SoldQtyB}}
                </p>
                <p class="list-group-item-text">
                    {{"Заказов: " + comparedModel.OrdQtyB}}
                </p>       
            </div>  
        </a>
        
    </div>

    <table class="table table-striped table-bordered">
        <thead>
        <tr>
            <th>Name</th>
            <th>Sold</th>
            <th>Orders</th>
            <th>Avg Sold per Order</th>
        </tr>
            <tr>
                <th>Total</th>
                <th>{{vm.getSoldSum()}}</th>
                <th>{{vm.getOrdQtySum()}}</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="model in vm.modelsArr">
                <td>{{model.Name}}</td>
                <td>{{model.SoldQty}}</td>
                <td>{{model.OrdQty}}</td>
                <td>{{vm.getAvgSoldPerOrd(model.SoldQty, model.OrdQty)}}</td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <th>Total</th>
                <th>{{vm.getSoldSum()}}</th>
                <th>{{vm.getOrdQtySum()}}</th>
                <th></th>
            </tr>
        </tfoot>
    </table>

</div>

